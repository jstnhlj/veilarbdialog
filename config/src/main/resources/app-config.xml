<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://appconfig.aura.nav.no"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://appconfig.aura.nav.no
             http://maven.adeo.no/xsd/appconfig.xsd ">

    <name>veilarbdialog</name>

    <selftest>
        <path>/veilarbdialog/internal/selftest</path>
    </selftest>

    <artifacts>
        <ear groupId="no.nav.fo" artifactId="veilarbdialog-ear"/>
    </artifacts>

    <loadBalancer isAlive="veilarbdialog/internal/isAlive"/>

    <security serviceUserResourceAlias="srvveilarbdialog">
        <logins>
            <saml/>
        </logins>
    </security>

    <abacSecurity serviceUserResourceAlias="srvveilarbdialog"/>

    <resources>
        <rest alias="veilarbazureadproxy_discovery" mapToProperty="aad_b2c_discovery" />
        <credential alias="aad_b2c_clientid"/>
        <applicationProperties alias="veilarbdialog.properties"/>
        <credential alias="srvveilarbdialog" mapToProperty="systembruker"/>
        <applicationCertificate alias="srvveilarbdialog"/>
        <datasource alias="veilarbdialogDataSource" jndi="java:jboss/jdbc/DialogDS">
            <pool maxPoolSize="300" minPoolSize="0"/>
        </datasource>
        <webservice alias="Aktoer_v2" mapToProperty="aktoer.endpoint"/>
        <rest alias="abac.pdp.endpoint" mapToProperty="abac.endpoint" />
        <rest alias="veilarblogin.redirect-url" mapToProperty="oidc-redirect" />
        <rest alias="veilArbOppfolgingAPI" mapToProperty="veilarboppfolging.api" />
        <rest alias="unleash-api" mapToProperty="unleash" />
        <baseUrl alias="isso-host"/>
        <baseUrl alias="isso-jwks"/>
        <baseUrl alias="isso-issuer"/>
        <baseUrl alias="isso.isalive"/>
        <baseUrl alias="aktivitetsplan"/>
        <credential alias="isso-rp-user"/>

        <ldap alias="ldap" mapToProperty="ldap"/>

        <queueManager alias="mqGateway03" xaEnabled="true" jndi="java:jboss/mqConnectionFactory" unifiedConnectionFactory="true">
            <queue jndi="java:/jboss/jms/VARSELPRODUKSJON.VARSLINGER" alias="VARSELPRODUKSJON.VARSLINGER"/>
            <queue jndi="java:/jboss/jms/VARSELPRODUKSJON.STOPP_VARSEL_UTSENDING" alias="VARSELPRODUKSJON.STOPP_VARSEL_UTSENDING"/>
            <queue jndi="java:/jboss/jms/VARSELPRODUKSJON.BEST_VARSEL_M_HANDLING" alias="VARSELPRODUKSJON.BEST_VARSEL_M_HANDLING"/>
            <queue jndi="java:/jboss/jms/henvendelse_OPPGAVE.HENVENDELSE" alias="henvendelse_OPPGAVE.HENVENDELSE"/>
        </queueManager>
    </resources>

    <exposed-services>
        <exposedSoap name="DialogOppfoelgingV1"
                     path="/veilarbdialog-ws/ws/Dialog"
                     securityToken="SAML"
                     wsdlGroupId="no.nav.tjenester"
                     wsdlArtifactId="brukerdialog-dialogOppfoelging-v1-tjenestespesifikasjon"
                     wsdlVersion="${dialogOppfoelging.tjenestespesifikasjon.version}">
            <exportToZone>SBS</exportToZone>
        </exposedSoap>
        <exposedRest path="/veilarbdialog/api" name="veilarbdialogAPI"/>
    </exposed-services>

    <serverOptions>
        <memoryParameters resourceAlias="veilarb-memparams"/>
    </serverOptions>
</application>
